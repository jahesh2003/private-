<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>I'm Sorry</title>
  <style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background: #f6ede1 url("download (4).jpg") center/contain no-repeat fixed;
  min-height: 100vh;
  overflow-x: hidden;
}

#loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #ffd8d0 0%, #ffe9d6 45%, #fbe2cf 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease;
}

#loading-screen.hidden {
  opacity: 0;
  pointer-events: none;
}

.loading-text {
  color: #b94f5a;
  font-size: 22px;
  text-align: center;
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

#particles-js {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 0;
}

.container {
  position: relative;
  z-index: 1;
  max-width: 860px;
  margin: 0 auto;
  padding: 32px 16px 88px;
}

.apology-message {
  background: rgba(255, 255, 255, 0.96);
  border-radius: 18px;
  padding: 30px 22px;
  margin: 0 auto 28px;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
  animation: fadeIn 1.4s ease;
}

.apology-message h2 {
  color: #c65a6c;
  margin-bottom: 16px;
  font-size: 26px;
}

.apology-message p {
  color: #3b2a2a;
  line-height: 1.7;
  font-size: 16.5px;
  margin-bottom: 12px;
}

.question-section {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 18px;
  padding: 30px 18px;
  text-align: center;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
  animation: fadeIn 1.6s ease;
}

.question-section h2 {
  color: #c65a6c;
  font-size: 26px;
  margin-bottom: 8px;
}

.question-section h3 {
  color: #d07a6a;
  font-size: 19px;
  margin-bottom: 22px;
}

.buttons-container {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1.25rem;
  flex-wrap: wrap;
  width: 100%;
  padding: 0.9rem 1rem;
}

.btn {
  padding: 0.8rem 2.2rem;
  font-size: 1.05rem;
  border: none;
  border-radius: 46px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 600;
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);
  flex: 1 1 42%;
  max-width: 16rem;
  min-width: 9rem;
  text-align: center;
}

#yes-btn {
  background: linear-gradient(135deg, #ff9a9e 0%, #f7c6a3 100%);
  color: #fffaf7;
  position: relative;
  transform: none;
  z-index: 2;
}

#yes-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.16);
}

#no-btn {
  background: linear-gradient(135deg, #ffd1c1 0%, #ff9a9e 100%);
  color: #fff8f6;
  position: absolute;
  transition: all 0.2s ease;
  z-index: 3;
}

#no-btn:hover {
  transform: scale(1.05);
}

.celebration {
  display: none;
  text-align: center;
  margin-top: 36px;
}

.celebration.active {
  display: block;
  animation: fadeIn 1s ease;
}

.celebration h2 {
  color: #c65a6c;
  font-size: 28px;
  margin-bottom: 12px;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

.celebration-sub {
  color: #d07a6a;
  font-size: 17px;
  margin-bottom: 18px;
}

.video-container {
  background: white;
  border-radius: 18px;
  padding: 16px;
  margin-bottom: 14px;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
}

video {
  width: 100%;
  max-width: 640px;
  border-radius: 14px;
}

audio {
  width: 100%;
  max-width: 420px;
  margin: 14px auto;
  display: block;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(18px); }
  to { opacity: 1; transform: translateY(0); }
}

.heart {
  position: fixed;
  font-size: 30px;
  animation: float 3s ease-in-out;
  pointer-events: none;
  z-index: 9999;
}

@keyframes float {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(-1000px) rotate(360deg); opacity: 0; }
}

.music-control {
  position: fixed;
  top: 16px;
  right: 16px;
  background: white;
  border: none;
  border-radius: 50%;
  width: 48px;
  height: 48px;
  font-size: 22px;
  cursor: pointer;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.22);
  z-index: 100;
  display: none;
}

.music-control.active {
  display: block;
}

@media (max-width: 900px) {
  .container { padding: 30px 14px 80px; }
  .apology-message { padding: 26px 20px; }
}

@media (max-width: 768px) {
  .container { padding: 26px 14px 74px; }
  .apology-message { padding: 24px 18px; }
  .apology-message h2 { font-size: 23px; }
  .apology-message p { font-size: 16px; line-height: 1.6; }
  .question-section { padding: 24px 16px; }
  .question-section h2 { font-size: 22px; }
  .question-section h3 { font-size: 18px; margin-bottom: 20px; }
  .btn { padding: 0.75rem 2rem; font-size: 1rem; min-width: 8.5rem; }
}

@media (max-width: 480px) {
  .buttons-container {
    flex-direction: column;
    align-items: stretch;
    gap: 0.9rem;
  }
  #yes-btn,
  #no-btn {
    position: relative;
    left: auto !important;
    top: auto !important;
    transform: none !important;
    width: 100%;
    max-width: 100%;
  }
}

@media (max-width: 430px) {
  .container { padding: 22px 12px 68px; }
  .apology-message { padding: 20px 14px; }
  .apology-message h2 { font-size: 21px; }
  .apology-message p { font-size: 15.5px; }
  .question-section { padding: 20px 12px; }
  .question-section h2 { font-size: 20px; }
  .question-section h3 { font-size: 16px; }
  .btn { padding: 0.7rem 1.8rem; font-size: 0.98rem; }
  .celebration h2 { font-size: 24px; }
  .celebration-sub { font-size: 15px; }
  .video-container { padding: 12px; }
}

@media (max-width: 393px) and (max-height: 852px) {
  /* Specific for iPhone 15 (393x852 logical pixels, 1179x2556 physical portrait) */
  body { 
    background-size: contain; /* Fits the full 9:16 image without cropping/zooming, preserving aspect ratio with color fill for bars */
    font-size: 14px; 
  }
  .container { 
    padding: 20px 10px 60px; 
    max-width: 100%;
  }
  .apology-message { 
    padding: 18px 12px; 
    margin-bottom: 20px;
    border-radius: 14px;
  }
  .apology-message h2 { font-size: 20px; }
  .apology-message p { 
    font-size: 15px; 
    line-height: 1.5;
    margin-bottom: 10px;
  }
  .question-section { 
    padding: 18px 10px; 
    border-radius: 14px;
  }
  .question-section h2 { font-size: 19px; }
  .question-section h3 { 
    font-size: 16px; 
    margin-bottom: 18px;
  }
  .buttons-container {
    padding: 0.5rem 0.5rem;
    gap: 0.75rem;
  }
  .btn { 
    padding: 0.65rem 1.6rem; 
    font-size: 0.95rem; 
    min-width: auto;
    border-radius: 35px;
  }
  .celebration { margin-top: 24px; }
  .celebration h2 { 
    font-size: 22px; 
    margin-bottom: 10px;
  }
  .celebration-sub { 
    font-size: 15px; 
    margin-bottom: 16px;
  }
  .video-container { 
    padding: 12px; 
    margin-bottom: 12px;
    border-radius: 14px;
  }
  video { border-radius: 10px; }
  audio { max-width: 100%; margin: 12px auto; }
  .music-control { 
    top: 12px; 
    right: 12px; 
    width: 44px; 
    height: 44px; 
    font-size: 20px;
  }
  .heart { font-size: 24px; }
}

@media (max-width: 390px) {
  .container { padding: 18px 12px 62px; }
  .apology-message { padding: 18px 12px; }
  .apology-message h2 { font-size: 20px; }
  .apology-message p { font-size: 15px; }
  .question-section { padding: 18px 12px; }
  .question-section h2 { font-size: 19px; }
  .question-section h3 { font-size: 15.5px; }
  .btn { padding: 0.68rem 1.6rem; font-size: 0.95rem; min-width: 8rem; }
}
  </style>
</head>
<body>
  <div id="loading-screen">
    <div class="loading-text">Preparing something special for you... üíï</div>
  </div>

  <div id="particles-js"></div>

  <button class="music-control" id="music-control">üîá</button>

  <div class="container">

    <div class="apology-message">
      <h2>My Heartfelt Apology</h2>
      <p>I know I acted rudely towards you because of my misunderstanding about our feelings. I thought you felt something you didn't, and instead of handling it maturely, I hurt you with my words and behavior. I'm truly sorry for that.</p>
      <p>You've been disappointed by me before, and I hate that I've let you down. You respect me, you value me, and I repaid that with hurt. That was wrong, and I take full responsibility for my actions.</p>
      <p>I've realized now that what matters most to me is having you in my life. I still care about you deeply, but I'd rather be your best friend than lose you completely. Your friendship means everything to me, and I promise to be the friend you deserve - someone who respects your feelings, supports you, and never puts you in an uncomfortable position.</p>
      <p>Can we start fresh? I want to show you that I can be a true saheli, someone you can trust and count on. Please give me one more chance.</p>
    </div>

    <div class="question-section" id="question-section">
      <h2>‡§ï‡•ç‡§Ø‡§æ ‡§§‡•Å‡§Æ ‡§Æ‡•Å‡§ù‡•á ‡§Æ‡§æ‡§´ ‡§ï‡§∞ ‡§¶‡•ã‡§ó‡•Ä? ü•∫</h2>
      <h3>Can I be your saheli?</h3>

      <div class="buttons-container">
        <button class="btn" id="no-btn">Nahi </button>
        <button class="btn" id="yes-btn">Haan </button>
      </div>
    </div>

    <div class="celebration" id="celebration">
      <h2>Thank you ü´∂</h2>
      <p class="celebration-sub"></p>

      <div class="video-container">
        <video id="apology-video" controls>
          <source src="video.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>

      <audio id="celebration-audio" loop>
        <source src="apology_audio.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </div>
  </div>

  <canvas id="confetti-canvas"></canvas>

  <script>
const loadingScreen = document.getElementById("loading-screen");
const particlesContainer = document.getElementById("particles-js");
const noBtn = document.getElementById("no-btn");
const yesBtn = document.getElementById("yes-btn");
const questionSection = document.getElementById("question-section");
const celebration = document.getElementById("celebration");
const celebrationAudio = document.getElementById("celebration-audio");
const musicControl = document.getElementById("music-control");
const confettiCanvas = document.getElementById("confetti-canvas");
const apologyVideo = document.getElementById("apology-video");

window.addEventListener("load", () => {
  setTimeout(() => loadingScreen.classList.add("hidden"), 2000);
  initParticles();
  adjustForMobile();
});

const adjustForMobile = () => {
  if (window.innerWidth <= 393) {
    // Reset no-btn position on mobile to avoid conflicts
    noBtn.style.left = 'auto';
    noBtn.style.top = 'auto';
    noBtn.style.transform = 'none';
    noBtn.style.position = 'relative';
  }
};

window.addEventListener('resize', adjustForMobile);

const initParticles = () => {
  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");
  particlesContainer.appendChild(canvas);

  const resize = () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  };
  resize();

  const particles = [];
  const particleCount = 50;

  class Particle {
    constructor() {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
      this.size = Math.random() * 3 + 1;
      this.speedX = Math.random() * 2 - 1;
      this.speedY = Math.random() * 2 - 1;
    }
    update() {
      this.x += this.speedX;
      this.y += this.speedY;
      if (this.x > canvas.width || this.x < 0) this.speedX *= -1;
      if (this.y > canvas.height || this.y < 0) this.speedY *= -1;
    }
    draw() {
      ctx.fillStyle = "rgba(255, 255, 255, 0.5)";
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  for (let i = 0; i < particleCount; i += 1) {
    particles.push(new Particle());
  }

  const animate = () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach((p) => {
      p.update();
      p.draw();
    });
    requestAnimationFrame(animate);
  };
  animate();

  window.addEventListener("resize", resize);
};

// Initial position for No button (away from center) - only for desktop
if (window.innerWidth > 393) {
  noBtn.style.left = "12%";
  noBtn.style.top = "58%";
  noBtn.style.transform = "none";
}

let clickCount = 0;
const messages = [
  "Nahi üôà",
  "Arey yaar, mat daba! üòÇ",
  "Pakki baat? üòÖ",
  "Soch lo ek aur baar! ü§û",
  "Bilkul nahi? üò≥",
  "Really? üò≠",
  "Last chance, promise! üôè",
  "Okay okay... maybe yes? üòâ",
  "Bas ek YES bol do! üòú",
  "Mat bhao khilaao! üòÜ",
  "Haan bolna easy hai! üòè",
  "Chhupa-chhupi chal rahi hai! üôÉ",
  "Tap to forgive? üì≤",
  "Please meri izzat rakh lo! üòÖ",
  "Dil pe patthar rakh ke YES! ü™®‚ù§Ô∏è",
];

const moveNoButton = () => {
  if (window.innerWidth <= 393) return; // Skip on mobile

  const container = document.querySelector(".buttons-container");
  const rect = container.getBoundingClientRect();
  const yesRect = yesBtn.getBoundingClientRect();
  const noW = noBtn.offsetWidth;
  const noH = noBtn.offsetHeight;

  // Forbid overlap with the Yes button (with a generous buffer)
  const buffer = 32;
  const extraMargin = 24; // additional clearance so borders never touch
  const forbidden = {
    x: yesRect.left - rect.left - buffer,
    y: yesRect.top - rect.top - buffer,
    w: yesRect.width + buffer * 2,
    h: yesRect.height + buffer * 2,
  };

  // Prefer positions around the Yes button without hiding behind it
  const maxX = rect.width - noW;
  const maxY = rect.height - noH;
  const yesCenterX = yesRect.left - rect.left + yesRect.width / 2;
  const yesCenterY = yesRect.top - rect.top + yesRect.height / 2;
  const baseRadius =
    Math.max(yesRect.width, yesRect.height) / 2 +
    Math.max(noW, noH) / 2;
  const minRadius = baseRadius + buffer + 12; // extra clearance so borders never touch
  const maxRadius = Math.min(
    Math.max(minRadius + 80, Math.min(rect.width, rect.height) * 0.75),
    Math.hypot(rect.width, rect.height)
  );

  let tries = 0;
  let x = 0;
  let y = 0;
  const overlapsYes = (nx, ny) =>
    nx + noW > forbidden.x &&
    nx < forbidden.x + forbidden.w &&
    ny + noH > forbidden.y &&
    ny < forbidden.y + forbidden.h;

  const tooCloseToYes = (nx, ny) => {
    const noCenterX = nx + noW / 2;
    const noCenterY = ny + noH / 2;
    const dist = Math.hypot(noCenterX - yesCenterX, noCenterY - yesCenterY);
    return dist < minRadius + extraMargin * 0.5;
  };

  const withMarginBox = (nx, ny) => {
    const marginBox = {
      x: forbidden.x - extraMargin,
      y: forbidden.y - extraMargin,
      w: forbidden.w + extraMargin * 2,
      h: forbidden.h + extraMargin * 2,
    };
    return (
      nx + noW > marginBox.x &&
      nx < marginBox.x + marginBox.w &&
      ny + noH > marginBox.y &&
      ny < marginBox.y + marginBox.h
    );
  };

  const withinBounds = (nx, ny) =>
    nx >= 0 && ny >= 0 && nx <= maxX && ny <= maxY;

  const isSafe = (nx, ny) =>
    withinBounds(nx, ny) && !overlapsYes(nx, ny) && !withMarginBox(nx, ny) && !tooCloseToYes(nx, ny);

  // Try positions in a ring around the yes button
  do {
    const angle = Math.random() * Math.PI * 2;
    const radius = minRadius + Math.random() * (maxRadius - minRadius);
    x = yesCenterX + Math.cos(angle) * radius - noW / 2;
    y = yesCenterY + Math.sin(angle) * radius - noH / 2;
    tries += 1;
  } while (
    (!isSafe(x, y)) &&
    tries < 30
  );

  // Fallback to random within container if ring fails
  if (!isSafe(x, y)) {
    do {
      x = Math.random() * maxX;
      y = Math.random() * maxY;
      tries += 1;
    } while (
      (!isSafe(x, y)) &&
      tries < 60
    );

    // Final deterministic fallbacks to avoid overlap
    if (!isSafe(x, y)) {
      const candidates = [
        // around the yes button (top, bottom, right, left)
        { x: yesCenterX - noW / 2, y: Math.max(0, yesCenterY - minRadius - noH / 2 - extraMargin) },
        { x: yesCenterX - noW / 2, y: Math.min(maxY, yesCenterY + minRadius - noH / 2 + extraMargin) },
        { x: Math.min(maxX, yesCenterX + minRadius - noW / 2 + extraMargin), y: yesCenterY - noH / 2 },
        { x: Math.max(0, yesCenterX - minRadius - noW / 2 - extraMargin), y: yesCenterY - noH / 2 },
        // corners
        { x: buffer + extraMargin, y: buffer + extraMargin },
        { x: maxX - buffer - extraMargin, y: buffer + extraMargin },
        { x: buffer + extraMargin, y: maxY - buffer - extraMargin },
        { x: maxX - buffer - extraMargin, y: maxY - buffer - extraMargin },
      ];
      const safe = candidates.find(
        (c) => isSafe(c.x, c.y)
      );
      if (safe) {
        x = safe.x;
        y = safe.y;
      }
    }
  }

  noBtn.style.left = `${x}px`;
  noBtn.style.top = `${y}px`;
  noBtn.style.transform = "none";
};

// Move only on click (no hover)
noBtn.addEventListener("click", (e) => {
  e.preventDefault();
  moveNoButton();

  if (clickCount < messages.length) {
    noBtn.textContent = messages[clickCount];
    clickCount += 1;
  } else {
    // loop through messages for extra clicks
    const idx = clickCount % messages.length;
    noBtn.textContent = messages[idx];
    clickCount += 1;
  }

  if (clickCount >= 3) {
    yesBtn.style.transform = "translate(-50%, -50%) scale(1.2)";
  }
});

const startConfetti = () => {
  const ctx = confettiCanvas.getContext("2d");
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
  confettiCanvas.style.position = "fixed";
  confettiCanvas.style.top = "0";
  confettiCanvas.style.left = "0";
  confettiCanvas.style.pointerEvents = "none";
  confettiCanvas.style.zIndex = "9999";

  const confetti = [];
  const confettiCount = 150;
  const colors = ["#ff6b6b", "#4ecdc4", "#45b7d1", "#f9ca24", "#ff69b4", "#ba68c8"];

  for (let i = 0; i < confettiCount; i += 1) {
    confetti.push({
      x: Math.random() * confettiCanvas.width,
      y: Math.random() * confettiCanvas.height - confettiCanvas.height,
      r: Math.random() * 6 + 4,
      d: Math.random() * confettiCount,
      color: colors[Math.floor(Math.random() * colors.length)],
      tilt: Math.random() * 10 - 10,
      tiltAngleIncrement: Math.random() * 0.07 + 0.05,
      tiltAngle: 0,
    });
  }

  const draw = () => {
    ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
    confetti.forEach((p, i) => {
      ctx.beginPath();
      ctx.lineWidth = p.r / 2;
      ctx.strokeStyle = p.color;
      ctx.moveTo(p.x + p.tilt + p.r, p.y);
      ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r);
      ctx.stroke();

      p.tiltAngle += p.tiltAngleIncrement;
      p.y += (Math.cos(p.d) + 3 + p.r / 2) / 2;
      p.tilt = Math.sin(p.tiltAngle) * 15;

      if (p.y > confettiCanvas.height) {
        confetti[i] = {
          x: Math.random() * confettiCanvas.width,
          y: -20,
          r: p.r,
          d: p.d,
          color: p.color,
          tilt: p.tilt,
          tiltAngleIncrement: p.tiltAngleIncrement,
          tiltAngle: p.tiltAngle,
        };
      }
    });
    requestAnimationFrame(draw);
  };
  draw();
};

const createHearts = () => {
  const hearts = ["‚ù§Ô∏è", "üíï", "üíñ", "üíó", "üíì", "üíù"];
  const spawn = () => {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
    heart.style.left = `${Math.random() * window.innerWidth}px`;
    heart.style.bottom = "0px";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 3000);
  };
  const interval = setInterval(spawn, 300);
  // stop after some time to avoid infinite growth
  setTimeout(() => clearInterval(interval), 12000);
};

const showCelebration = () => {
  questionSection.style.display = "none";
  celebration.classList.add("active");
  startConfetti();
  createHearts();
  celebrationAudio.play().catch(() => {});
  musicControl.classList.add("active");
  musicControl.textContent = "üîä";
  apologyVideo.play().catch(() => {});
};

yesBtn.addEventListener("click", showCelebration);

musicControl.addEventListener("click", () => {
  if (celebrationAudio.paused) {
    celebrationAudio.play().catch(() => {});
    musicControl.textContent = "üîä";
  } else {
    celebrationAudio.pause();
    musicControl.textContent = "üîá";
  }
});
  </script>
</body>
</html>


